# Azure Recovery Vault


**General**
- ﻿The same region or the same resource group.
- Logical container for backup
- 500 vaults per subscription
- Replicates LRS or GRS

You can't delete a Recovery Services vault if it is registered to a server and holds backup data. If you try to delete a vault, but can't, the vault is still configured to receive backup data. Remove vault dependencies and delete vault In the vault dashboard menu, scroll down to the Protected Items section, and click Backup Items. In this menu, you can stop and delete Azure File Servers, SQL Servers in Azure VM, and Azure virtual machines.


**Azure Key Vault**

- One stop shop for protecting secrets that you don’t want to keep as plain text, follow Federal - Information Processing Standards (FIPS) 140-2(level 2)
- Key vault keeps secret, and each version can be accessed by URL
- 25KB Max
- Post the secret to the vault, and give it a name ( Every secret Attributes (Name, Value, Expiry Dat - just for info, Not before Date ( just for info), Enabled, Created/Updated (read-only)
- Protecting Password
- Protecting Access Keys
- Protecting Secrets
- Protecting Encryption Keys (x509 certificates-Key vault can interact directly with some certificate authorities)

Key Vault gives your customers the ability to centrally store their secrets. These secrets are split into three groups:

**Keys**
- Symmetric and asymmetric (public/private key pair) keys. Private keys cannot be retrieved; they’re used only in cryptographic operations.
- They’re generated by key vault or imported (bring your own key or BYOK).
- They’re used for Azure services like Always Encrypted and Transparent Data Encryption (TDE).
- They’re stored in a cryptographic key service. Keys are irretrievable.

**Secrets**
- For any sensitive information, database connection strings, Redis Cache connections, storage connections used in applications.
- Other sensitive information you may need at runtime, if highly sensitive, should be encrypted before storing.
- 25KB is the maximum size.

**Certificates**
- X509 certificates, used in HTTPS/SSL/TLS.
- They can link to some external CAs for auto-	renewal.
- They’re stored as JSON wrapped secrets.

```sh
DELETE HTTPS://EnAppVault.vault.azure.net/certificates/EnAppCert?api-version=7.0

This command will delete all versions of a certificate object from a specified key vault, along with its associated policy
```
## RBAC

**SecOps**
-  Create vaults, manage the keys and secrets in the vault. Revoke/delete.
-  Grant permissions to users and applications to perform cryptographic and management operations, read URIs, add keys, and so on.
-  Enable logging for auditors.
-  Can see some keys/secrets depending how they’re stored.

**Developers**
- Add links to the keys and secrets into applications using URIs instead of actual values or keys.
- Never see the keys or secrets.

**Auditors**
- Monitor the log files and review usage for compliance and security standards.
- Never see keys or secrets.

## Pricing Tier

**Standard**.
- Standard Software protected keys. Free to store, billed per transaction.

**Premium**
- Premium Hardware Security Module—stored keys certified to FIPS 140-2 (required by some regulated industries). Cost to store and per transaction.

When access to secrets, keys, and certificates is given, it’s for the entire vault. Therefore, it’s part of best practice to separate key vaults across applications and then again across environments (dev, pre-prod, prod). This ensures that each environment’s applications cannot use the others keys. This separation also helps to make sure key vault transaction limits are not hit.

**Customer-managed keys are supported on Azure Storage (SSE) for blobs and files, Azure SQL Database (TDE), and Azure Disk Encryption for encryption at rest.**

■ To secure secrets, keys, and certificates, use Key Vault. If you need HSM-backed keys for FIPS compliance, you need the premium tier. Microsoft can’t read the keys, secrets, or certificates in your vault. The key vault APIs can be called directly or via wrappers using Azure portal, PowerShell, CLI, and code libraries. Key vaults should be protected from deletion by mistake.

■ Storage Service Encryption (SSE) is data encryption at rest for Azure Storage. System-managed keys support all services; customer-managed keys are for blobs and files. Managed disks are automatically encrypted by SSE and do not support BYOK. Unmanaged disks must use BYOK. Azure security center flags un-encrypted, unmanaged disks as a risk.
